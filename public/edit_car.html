<!DOCTYPE html>
<html lang="en">

<head>
    <title>Form Validation - Custom Style Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <!-- Favicon icon -->
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">

    <!-- font css -->
    <link rel="stylesheet" href="assets/fonts/feather.css">
    <link rel="stylesheet" href="assets/fonts/fontawesome.css">
    <link rel="stylesheet" href="assets/fonts/material.css">
    <script src="js/includeHtml.js"></script>
    <!-- vendor css -->
    <link rel="stylesheet" href="assets/css/style.css" id="main-style-link">


    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-storage.js"></script>
    <script type="text/javascript" src="js/authentication.js"></script>
    <script type="text/javascript" src="js/firebaseSDKsnippet.js"></script>
    <script type="text/javascript" src="js/queryString.js"></script>
</head>

<body class="">
    <!-- [ Pre-loader ] start -->
    <div class="loader-bg">
        <div class="loader-track">
            <div class="loader-fill"></div>
        </div>
    </div>
    <!-- [ Pre-loader ] End -->
    <!-- [ Mobile header ] start -->
    <div class="pc-mob-header pc-header">
        <div class="pcm-logo">
            <img src="assets/images/logo-white.png" alt="" class="logo logo-lg">
        </div>
        <div class="pcm-toolbar">
            <a href="#!" class="pc-head-link" id="mobile-collapse">
                <div class="hamburger hamburger--arrowturn">
                    <div class="hamburger-box">
                        <div class="hamburger-inner"></div>
                    </div>
                </div>
            </a>
            <a href="#!" class="pc-head-link" id="headerdrp-collapse">
                <i data-feather="align-right"></i>
            </a>
            <a href="#!" class="pc-head-link" id="header-collapse">
                <i data-feather="more-vertical"></i>
            </a>
        </div>
    </div>
    <!-- [ Mobile header ] End -->

    <!-- [ navigation menu ] start -->

    <!--include navigation menu start-->
    <div w3-include-html="navigation_menu.html"></div>
    <!--include navigation menu end-->

    <!-- [ navigation menu ] end -->





    <!-- [ Header ] start -->
    <header class="pc-header ">
        <!--include header start-->
        <div w3-include-html="header.html"></div>
        <!--include header end-->
    </header>
    <!-- [ Header ] end -->

    <!-- [ Main Content ] start -->


    <div class="pc-container">
        <div class="container-fluid rounded bg-white mt-1">
            <div class="row">
                <div class="col">

                    <div class="card" style="min-height:400px;">
                        <div class="card-body">
                            <center>
                                <h2>Update Car</h2>
                            </center>
                            <form class="row g-3 " action="#" name="contactForm" onsubmit="return validateForm()" method="post">



                                <div class="col-md-3 text-center">
                                    <div class="car-img">
                                        <img src="assets/images/products/car.jpg" class="picture-src" id="uploadPreview" width="200px">

                                        <div class="file btn btn-lg btn-primary" style="width: 80%;">
                                            Choose Car Photo
                                            <input id="uploadBtn" type="file" class="upload  col-md-12" onchange="uploadPicture();" />

                                        </div>
                                    </div>
                                    <input class="col-12" id="pictureName" placeholder="File Name here" disabled="disabled" style="width:80%;" />
                                </div>

                                <input type="hidden" id="carId" name="carId" value="">
                                <div class="col-md-9 border-right">
                                    <div class=row>
                                        <div class="col-md-6 col-sm-12">
                                            <label for="carBrand" class="form-label">Car Brand</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="carBand" name="carBrand" aria-describedby="inputGroupPrepend" placeholder="Car Brand" onkeyup="validateCarBrand()">
                                                <span class="input-group-text iconParent"><i class="fa fa-star" id="carBrandIcon"></i></span>
                                            </div>
                                            <div class="error" id="carBrandErr"></div>
                                        </div>

                                        <div class="col-md-6 col-sm-12">
                                            <label for="carAge" class="form-label">Age of Vehicle</label>
                                            <div class="input-group">
                                                <select name="carAge" id="carAge" class="form-control" onchange="validateCarAge()">
                                                    <option value=""></option>
                                                    <option value="10">Less than 1 year</option>
                                                    <option value="20" >1-2 year</option>
                                                    <option value="30">2-5 years</option>
                                                    <option value="40">5-10 years</option>
                                                    <option value="50">10-15 years</option>
                                                    <option value="75">15-20 years</option>
                                                    <option value="100">Over 20 years</option>
                                                </select>
                                                <span class="input-group-text iconParent"><i  class="fa fa-star" id="carAgeIcon" ></i></span>
                                            </div>
                                            <div class="error" id="carAgeErr"></div>
                                        </div>

                                        <div class="col-md-6 col-sm-12">
                                            <label for="licensePlate" class="form-label">License Plate ID</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="licensePlate" name="licensePlate" aria-describedby="inputGroupPrepend" placeholder="License Plate" onkeyup="validateLicensePlate()">
                                                <span class="input-group-text iconParent"><i class="fa fa-star" id="licensePlateIcon"></i></span>
                                            </div>
                                            <div class="error" id="licensePlateErr"></div>
                                        </div>

                                        <div class="col-md-6 col-sm-12">
                                            <label for="carMileage" class="form-label">Car Mileage</label>
                                            <div class="input-group">
                                                <select name="carMileage" id="carMileage" class="form-control" onchange="validateCarMileage()">
                                                   <option value=""></option>
                                                   <option value="10">Under 10,000 Miles</option>
                                                   <option value="20" >10,000-25,000 Miles</option>
                                                   <option value="30">25,000-50,000 Miles</option>
                                                   <option value="40">50,000-100,000 Miles</option>
                                                   <option value="50">100,000-250,000 Miles</option>
                                                   <option value="75">250,000-500,000 Miles</option>
                                                   <option value="100">500,000-1,000,000 Miles</option>
                                                   <option value="150">Over 1,000,000 Miles</option>
                                               </select>
                                                <span class="input-group-text iconParent"><i  class="fa fa-star" id="carMileageIcon" ></i></span>
                                            </div>
                                            <div class="error" id="carMileageErr"></div>
                                        </div>

                                        <div class="col-md-12 col-sm-12">
                                            <label for="vin" class="form-label">VIN</label>
                                            <div class="input-group">
                                                <input type="text" class="form-control" id="vin" name="vin" aria-describedby="inputGroupPrepend" placeholder="VIN" onkeyup="validateVin()">
                                                <span class="input-group-text iconParent"><i  class="fa fa-star" id="vinIcon" ></i></span>
                                            </div>
                                            <div class="error" id="vinErr"></div>
                                        </div>

                                    </div>
                                </div>
                                <hr>

                                <div class="col-md-4 col mt-0">
                                    <label for="startingAt" class="form-label">Starting at</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="startingAt" name="startingAt" aria-describedby="inputGroupPrepend" placeholder="Starting At" onkeyup="validateStartingAt()">
                                        <span class="input-group-text iconParent"><i  class="fa fa-star" id="startingAtIcon" ></i></span>
                                    </div>
                                    <div class="error" id="startingAtErr"></div>
                                </div>

                                <div class="col-md-4 col mt-0">
                                    <label for="fuelEfficiency" class="form-label">Fuel Efficiency</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="fuelEfficiency" name="fuelEfficiency" aria-describedby="inputGroupPrepend" placeholder="Fuel Efficiency" onkeyup="validateFuelEfficiency()">
                                        <span class="input-group-text iconParent"><i  class="fa fa-star" id="fuelEfficiencyIcon" ></i></span>
                                    </div>
                                    <div class="error" id="fuelEfficiencyErr"></div>
                                </div>

                                <div class="col-md-4 col mt-0">
                                    <label for="cityHwy" class="form-label">City/Hwy</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="cityHwy" name="cityHwy" aria-describedby="inputGroupPrepend" placeholder="City/Hwy" onkeyup="validateCityHwy()">
                                        <span class="input-group-text iconParent"><i  class="fa fa-star" id="cityHwyIcon" ></i></span>
                                    </div>
                                    <div class="error" id="cityHwyErr"></div>
                                </div>



                                <div class="col-md-6 col mt-0">
                                    <label for="engineCapacity" class="form-label">Engine Capacity</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="engineCapacity" name="engineCapacity" aria-describedby="inputGroupPrepend" placeholder="Engine Capacity" onkeyup="validateEngineCapacity()">
                                        <span class="input-group-text iconParent"><i  class="fa fa-star" id="engineCapacityIcon" ></i></span>
                                    </div>
                                    <div class="error" id="engineCapacityErr"></div>
                                </div>

                                <div class="col-md-6 col mt-0">
                                    <label for="horsepower" class="form-label">Horsepower</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="horsepower" name="horsepower" aria-describedby="inputGroupPrepend" placeholder="Horsepower" onkeyup="validateHorsepower()">
                                        <span class="input-group-text iconParent"><i  class="fa fa-star" id="horsepowerIcon" ></i></span>
                                    </div>
                                    <div class="error" id="horsepowerErr"></div>
                                </div>

                                <div class="col-md-6 col mt-0">
                                    <label for="cityTown" class="form-label">City of Origin</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="cityTown" name="cityTown" aria-describedby="inputGroupPrepend" placeholder="City/Town" onkeyup="validateCity()">
                                        <span class="input-group-text iconParent"><i  class="fa fa-star" id="cityIcon" ></i></span>
                                    </div>
                                    <div class="error" id="cityTownErr"></div>
                                </div>

                                <div class="col-md-6 col mt-0">
                                    <label for="state" class="form-label">State of Origin</label>
                                    <div class="input-group">
                                        <select name="state" id="state" class="form-control" onchange="validateState()">
                <option value=""></option>
                <option>Alabama</option>
                <option>Alaska</option>
                <option>Arizona</option>
                <option>Arkansas</option>
                <option>California</option>
                <option>Colorado</option>
                <option>Connecticut</option>
                <option>Delaware</option>
                <option>District of Columbia</option>
                <option>Florida</option>
                <option>Georgia</option>
                <option>Hawaii</option>
                <option>Idaho</option>
                <option>Illinois</option>
                <option>Indiana</option>
                <option>Iowa</option>
                <option>Kansas</option>
                <option>Kentucky</option>
                <option>Louisiana</option>
                <option>Maine</option>
                <option>Maryland</option>
                <option>Mass.</option>
                <option>Michigan</option>
                <option>Minnesota</option>
                <option>Mississippi</option>
                <option>Missouri</option>
                <option>Montana</option>
                <option>Nebraska</option>
                <option>Nevada</option>
                <option>New Hampshire</option>
                <option>New Jersey</option>
                <option>New Mexico</option>
                <option>New York</option>
                <option>North Carolina</option>
                <option>North Dakota</option>
                <option>Ohio</option>
                <option>Oklahoma</option>
                <option>Oregon</option>
                <option>Pennsylvania</option>
                <option>Rhode Island</option>
                <option>South Carolina</option>
                <option>South Dakota</option>
                <option>Tennessee</option>
                <option>Texas</option>
                <option>Utah</option>
                <option>Vermont</option>
                <option>Virginia</option>
                <option>Washington</option>
                <option>West Virginia</option>
                <option>Wisconsin</option>
                <option>Wyoming</option>
            </select>
                                        <span class="input-group-text iconParent"><i  class="fa fa-star" id="stateIcon" ></i></span>
                                    </div>
                                    <div class="error" id="stateErr"></div>
                                </div>

                                <div class="row mt-1">
                                    <label>Certify that you are the owner of this vehicle</label>
                                    <div class="form-inline">
                                        <label><input type="checkbox" value="agree" id="vehicleOwner"> I certify that I am the owner of this vehicle</label>
                                        <div class="error" id="vehicleOwnerErr"></div>
                                    </div>
                                </div>

                                <div class="row">
                                    <button type="button" class="btn btn-outline-primary mt-3" onclick="validateForm();">
                    Submit&nbsp;&nbsp; 
                    <i class="fa fa-paper-plane" aria-hidden="true"></i>
                </button>

                                </div>
                            </form>
                        </div>
                        <!-- [ Footer ] start -->
                        <div class="container-fluid rounded bg-blue-100 mt-1">
                            <!--include footer start-->
                            <div w3-include-html="footer.html"></div>
                            <!--include footer end-->
                        </div>
                        <!-- [ Footer ] end -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    (function documentReady() {


        $("#show_hide_password a").on('click', function(event) {
            event.preventDefault();
            if ($('#show_hide_password input').attr("type") == "text") {
                $('#show_hide_password input').attr('type', 'password');
                $('#show_hide_password i').addClass("fa-eye-slash");
                $('#show_hide_password i').removeClass("fa-eye");
            } else if ($('#show_hide_password input').attr("type") == "password") {
                $('#show_hide_password input').attr('type', 'text');
                $('#show_hide_password i').removeClass("fa-eye-slash");
                $('#show_hide_password i').addClass("fa-eye");
            }
        });




        $("#show_hide_confirm_password a").on('click', function(event) {
            event.preventDefault();
            if ($('#show_hide_confirm_password input').attr("type") == "text") {
                $('#show_hide_confirm_password input').attr('type', 'password');
                $('#show_hide_confirm_password i').addClass("fa-eye-slash");
                $('#show_hide_confirm_password i').removeClass("fa-eye");
            } else if ($('#show_hide_confirm_password input').attr("type") == "password") {
                $('#show_hide_confirm_password input').attr('type', 'text');
                $('#show_hide_confirm_password i').removeClass("fa-eye-slash");
                $('#show_hide_confirm_password i').addClass("fa-eye");
            }
        });





    })();
</script>
<script>
    // Defining a function to display error message
    function printError(elemId, hintMsg) {
        //alert(elemId);
        document.getElementById(elemId).innerHTML = hintMsg;
    }

    // Retrieving the values of form elements 
    var carAge = document.contactForm.carAge;
    var vin = document.contactForm.vin;
    var carBrand = document.contactForm.carBrand;
    var licensePlate = document.contactForm.licensePlate;

    var startingAt = document.contactForm.startingAt;
    var fuelEfficiency = document.contactForm.fuelEfficiency;
    var carengineAge = document.contactForm.engine;
    var horsepower = document.contactForm.horsepower;
    var cityHwy = document.contactForm.cityHwy;


    var cityTown = document.contactForm.cityTown;
    var carMileage = document.contactForm.carMileage;
    var state = document.contactForm.state;
    var vehicleOwner = document.contactForm.vehicleOwner;
    var pictureName = document.getElementById("pictureName");

    // Defining error variables with a default value
    var carAgeErr = vinErr = carBrandErr = licensePlateErr = startingAtErr = fuelEfficiencyErr = engineCapacityErr = cityHwyErr = horsepowerErr = cityTownErr = carMileageErr = stateErr = vehicleOwnerErr = true;

    function valid(el, iconID) {
        el.style.border = "1px solid green";
        var elIcon = document.getElementById(iconID);
        elIcon.parentNode.style.border = "1px solid green";
        elIcon.style.color = "green";
        elIcon.classList.remove("fa-star");
        elIcon.classList.remove("fa-exclamation-triangle");
        elIcon.classList.add("fa-check");
    }

    function inValid(el, iconID) {
        el.style.border = "1px solid red";
        var elIcon = document.getElementById(iconID);
        elIcon.parentNode.style.border = "1px solid red";
        elIcon.style.color = "red";
        elIcon.classList.remove("fa-star");
        elIcon.classList.remove("fa-check");
        elIcon.classList.add("fa-exclamation-triangle");
    }

    // Validate carAge
    function validateCarAge() {
        // Validate carAge
        if (carAge.value == "") {
            printError("carAgeErr", "Please select the age of your vehicle");
            inValid(carAge, "carAgeIcon");
        } else {
            printError("carAgeErr", "");
            carAgeErr = false;
            valid(carAge, "carAgeIcon");
        }
    }

    // Validate vin
    function validateVin() {
        if (vin.value == "") {
            printError("vinErr", "Please enter your vin");
            inValid(vin, "vinIcon");
        } else {
            var regex = /^[a-zA-Z0-9\s]{17}$/;
            if (regex.test(vin.value) === false) {
                printError("vinErr", "Please enter a valid vin");
                inValid(vin, "vinIcon");
            } else {
                printError("vinErr", "");
                vinErr = false;
                valid(vin, "vinIcon");
            }
        }
    }

    // Validate car brand
    function validateCarBrand() {

        if (carBrand.value == "") {
            printError("carBrandErr", "Please enter your car brand");
            inValid(carBrand, "carBrandIcon");

        } else {
            var regex = /^[A-Z][a-z]*/;
            if (regex.test(carBrand.value) === false) {
                printError("carBrandErr", "Please enter a valid car brand");
                inValid(carBrand, "carBrandIcon");
            } else {
                printError("carBrandErr", "");
                carBrandErr = false;
                valid(carBrand, "carBrandIcon");
            }
        }
    }

    // Validate license plate
    function validateLicensePlate() {

        if (licensePlate.value == "") {
            printError("licensePlateErr", "Please enter your license plate ID");
            inValid(licensePlate, "licensePlateIcon");

        } else {
            var regex = /^\(?([a-zA-Z]{3})\)?[-. ]?([0-9]{4})$/;
            if (regex.test(licensePlate.value) === false) {
                printError("licensePlateErr", "Please enter a valid license plate ID");
                inValid(licensePlate, "licensePlateIcon");
            } else {
                printError("licensePlateErr", "");
                licensePlateErr = false;
                valid(licensePlate, "licensePlateIcon");
            }
        }
    }



    function validateStartingAt() {
        // Validate Starting At
        if (startingAt.value == "") {
            printError("startingAtErr", "Please enter starting at price");
            inValid(startingAt, "startingAtIcon");
        } else {
            // Regular expression for Starting At price
            var regex = /^[0-9,.]+$/; // ex: 22,495


            if ((regex.test(startingAt.value)) === false) {
                printError("startingAtErr", "Please enter a valid starting at price");
                inValid(startingAt, "startingAtIcon");
            } else {
                printError("startingAtErr", "");
                startingAtErr = false;
                valid(startingAt, "startingAtIcon");
            }
        }
    }


    function validateFuelEfficiency() {
        // Validate fuel efficiency
        if (fuelEfficiency.value == "") {
            printError("fuelEfficiencyErr", "Please enter Fuel Efficiency");
            inValid(fuelEfficiency, "fuelEfficiencyIcon");
        } else {
            // Regular expression for Fuel Efficiency
            var regex = /^[0-9\/.A-Za-z]+$/; // ex: 1.4L MultiAir 16V I-4 Turbo


            if ((regex.test(fuelEfficiency.value)) === false) {
                printError("fuelEfficiencyErr", "Please enter a valid Fuel Efficiency");
                inValid(fuelEfficiency, "fuelEfficiencyIcon");
            } else {
                printError("fuelEfficiencyErr", "");
                fuelEfficiencyErr = false;
                valid(fuelEfficiency, "fuelEfficiencyIcon");
            }
        }
    }


    function validateCityHwy() {
        // Validate fuel efficiency
        if (cityHwy.value == "") {
            printError("cityHwyErr", "Please enter City/Hwy");
            inValid(cityHwy, "cityHwyIcon");
        } else {
            // Regular expression for City/Hwy
            var regex = /^[0-9\/.]+$/; // ex: 8.5/7.1


            if ((regex.test(cityHwy.value)) === false) {
                printError("cityHwyErr", "Please enter a valid City/Hwy");
                inValid(cityHwy, "cityHwyIcon");
            } else {
                printError("cityHwyErr", "");
                cityHwyErr = false;
                valid(cityHwy, "cityHwyIcon");
            }
        }
    }

    function validateEngineCapacity() {
        // Validate engine
        if (engineCapacity.value == "") {
            printError("engineCapacityErr", "Please enter Engine Capacity");
            inValid(engineCapacity, "engineCapacityIcon");
        } else {
            // Regular expression for Engine Capacity
            var regex = /^[0-9a-zA-Z-. \/?]*$/; // ex: 1.4L MultiAir 16V I-4 Turbo


            if ((regex.test(engineCapacity.value)) === false) {
                printError("engineCapacityErr", "Please enter a valid Engine Capacity");
                inValid(engineCapacity, "engineCapacityIcon");
            } else {
                printError("engineCapacityErr", "");
                engineCapacityErr = false;
                valid(engineCapacity, "engineCapacityIcon");
            }
        }
    }


    function validateHorsepower() {
        // Validate horsepower
        if (horsepower.value == "") {
            printError("horsepowerErr", "Please enter Horsepower Capacity");
            inValid(horsepower, "horsepowerIcon");
        } else {
            // Regular expression for Horsepower Capacity
            var regex = /^\d*$/; // ex: 135


            if ((regex.test(horsepower.value)) === false) {
                printError("horsepowerErr", "Please enter a valid Horsepower Capacity");
                inValid(horsepower, "horsepowerIcon");
            } else {
                printError("horsepowerErr", "");
                horsepowerErr = false;
                valid(horsepower, "horsepowerIcon");
            }
        }
    }





    function validateCity() {
        // Validate city/town
        if (cityTown.value == "") {
            printError("cityTownErr", "Please enter your city/town");
            inValid(cityTown, "cityIcon");
        } else {
            // Regular expression for basic address validation
            var regex = /^[A-Z][a-z]*/; // ex: Farmingdale
            var regex2 = /^[A-Z][a-z]*\s[A-Z][a-z]*/; // ex: New York

            if ((regex.test(cityTown.value) || regex2.test(cityTown.value)) === false) {
                printError("cityTownErr", "Please enter a valid city/town");
                inValid(cityTown, "cityIcon");
            } else {
                printError("cityTownErr", "");
                cityTownErr = false;
                valid(cityTown, "cityIcon");
            }
        }
    }

    // Validate carMileage
    function validateCarMileage() {
        // Validate carMileage
        if (carMileage.value == "") {
            printError("carMileageErr", "Please select your carMileage");
            inValid(carMileage, "carMileageIcon");
        } else {
            printError("carMileageErr", "");
            carMileageErr = false;
            valid(carMileage, "carMileageIcon");
        }
    }

    // Validate state
    function validateState() {
        // Validate state
        if (state.value == "") {
            printError("stateErr", "Please select your state");
            inValid(state, "stateIcon");
        } else {
            printError("stateErr", "");
            stateErr = false;
            valid(state, "stateIcon");
        }
    }


    // Defining a function to validate form 
    function validateForm() {
        validateCarAge();
        validateVin();
        validateCarBrand();
        validateLicensePlate();
        validateCity();
        validateCarMileage();
        validateState();
        validateCityHwy();
        validateStartingAt();
        validateFuelEfficiency();
        validateEngineCapacity();
        validateHorsepower();


        if (!vehicleOwner.checked) {
            printError("vehicleOwnerErr", "You must certify that you are the owner of this vehicle.");
            return false;
        } else {
            printError("vehicleOwnerErr", "");
            vehicleOwnerErr = false;
        }


        // Prevent the form from being submitted if there are any errors
        if ((vinErr || carBrandErr || licensePlateErr || cityTownErr || carMileageErr ||
                stateErr || vehicleOwnerErr) == true) {
            alert("error");
            return false;
        } else {

            updateCar();
            return true;
        }

    };
</script>
<script>
    function uploadPicture() {

        const file = document.querySelector("#uploadBtn").files[0];
        const fileName = +new Date() + "-" + file.name;
        document.getElementById("pictureName").value = fileName;
        //create a storage reference
        const ref = firebase.storage().ref("images/");
        const metadata = {
            contentType: file.type
        };
        const task = ref.child(fileName).put(file, metadata);
        task
            .then(snapshot => snapshot.ref.getDownloadURL())
            .then(url => {
                console.log(url);
                document.querySelector("#uploadPreview").src = url;
            })
            .catch(console.error);
    }
</script>



<style>
    .fileUpload {
        position: relative;
        overflow: hidden;
        margin: 10px;
    }
    
    .fileUpload input.upload {
        position: absolute;
        top: 0;
        right: 0;
        margin: 0;
        padding: 0;
        font-size: 20px;
        cursor: pointer;
        opacity: 0;
        filter: alpha(opacity=0);
    }
    
    .error {
        color: red;
        font-size: 90%;
    }
    
    input[type="submit"]:hover {
        background: #0165b6;
    }
    
    input[type=text],
    input[type=password],
    select {
        border-right: 0 !important;
    }
    
    .iconParent {
        background-color: white;
        border-left: 0 !important;
    }
</style>
<style>
    .emp-profile {
        padding: 3%;
        margin-top: 3%;
        margin-bottom: 3%;
        border-radius: 0.5rem;
        background: #fff;
    }
    
    .car-img {
        text-align: center;
    }
    
    .car-img img {
        width: 70%;
        height: 100%;
    }
    
    .car-img .file {
        position: relative;
        overflow: hidden;
        margin-top: -20%;
        width: 70%;
        border: none;
        border-radius: 0;
        font-size: 15px;
        background: #212529b8;
    }
    
    .car-img .file input {
        position: absolute;
        opacity: 0;
        right: 0;
        top: 0;
    }
    
    .car-head h5 {
        color: #333;
    }
    
    .car-head h6 {
        color: #0062cc;
    }
    
    .car-edit-btn {
        border: none;
        border-radius: 1.5rem;
        width: 70%;
        padding: 2%;
        font-weight: 600;
        color: #6c757d;
        cursor: pointer;
    }
</style>
<script>
    function loadCar(id) {
        console.log(id);

        carsCollection.doc(id).get()
            .then(docuemnt => {
                if (docuemnt) {
                    console.log(docuemnt.data());

                    var idValue = docuemnt.id;
                    var vinValue = docuemnt.get("vin");
                    var carAgeValue = docuemnt.get("carAge");
                    var carBrandValue = docuemnt.get("carBrand");
                    var licensePlateValue = docuemnt.get("licensePlate");
                    var startingAtValue = docuemnt.get("startingAt");
                    var fuelEfficiencyValue = docuemnt.get("fuelEfficiency");
                    var engineCapacityValue = docuemnt.get("engineCapacity");
                    var cityHwyValue = docuemnt.get("cityHwy");
                    var horsepowerValue = docuemnt.get("horsepower");
                    var cityTownValue = docuemnt.get("cityTown");
                    var carMileageValue = docuemnt.get("carMileage");;
                    var stateValue = docuemnt.get("state");
                    var vehicleOwnerValue = docuemnt.get("vehicleOwner");
                    var pictureNameValue = docuemnt.get("pictureName");
                    var carID = docuemnt.get("carId");

                    carId.value = idValue;
                    carBrand.value = carBrandValue;
                    carAge.value = carAgeValue;
                    licensePlate.value = licensePlateValue;
                    carMileage.value = carMileageValue;
                    vin.value = vinValue;
                    startingAt.value = startingAtValue;
                    fuelEfficiency.value = fuelEfficiencyValue;
                    cityHwy.value = cityHwyValue;
                    engineCapacity.value = engineCapacityValue;
                    horsepower.value = horsepowerValue;
                    cityTown.value = cityTownValue;
                    state.value = stateValue;
                    if (vehicleOwnerValue == true) {
                        vehicleOwner.checked = true;
                    }

                    pictureName.value = pictureNameValue;
                    showPicture(pictureNameValue);



                } else
                    alert('Car does not exist!');
            })
            .catch(error => {
                console.error(error);
            });



    }
</script>

<script>
    /************************************ firestore Start ******************************************/

    const database = firebase.firestore();

    const carsCollection = database.collection('cars');

    //Update Car

    function updateCar() {
        const _ref = firebase.firestore().collection('cars').doc();
        const idValue = carId.value;



        carsCollection.doc(idValue).set({
                vin: vin.value,
                carAge: carAge.value,
                carBrand: carBrand.value,
                licensePlate: licensePlate.value,
                startingAt: startingAt.value,
                fuelEfficiency: fuelEfficiency.value,
                engineCapacity: engineCapacity.value,
                cityHwy: cityHwy.value,
                horsepower: horsepower.value,
                cityTown: cityTown.value,
                carMileage: carMileage.value,
                state: state.value,
                vehicleOwner: vehicleOwner.checked,
                pictureName: pictureName.value

            })
            .then(() => {
                console.log('Car has been updated successfully !')
                console.log('Car Key: ' + idValue);
                window.location = "thankYou.html";
            })
            .catch(error => {
                console.error(error)
                window.location = "error.html";
            });



    }


    (function documentReady() {
        includeHTML();
        //Get customer id
        var carId = $.QueryString.id
        console.log(carId);
        loadCar(carId);
    })();



    function showPicture(photoURL) {
        //create a storage reference
        var storage = firebase.storage().ref("images/" + photoURL);
        //get file url
        storage
            .getDownloadURL()
            .then(function(url) {
                console.log(url);

                document.getElementById("uploadPreview").src = url;
            })
            .catch(function(error) {
                console.log("error encountered");
                console.log(error.message);
            });
    }
</script>


</html>